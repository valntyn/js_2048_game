{"version":3,"sources":["scripts/main.js"],"names":["scoreDisplay","document","querySelector","button","cells","querySelectorAll","messageWin","messageLose","messageStart","score","startGame","forEach","el","innerHTML","classList","add","remove","className","generate","styles","randomNumber","Math","floor","random","length","checkForLose","moveRight","i","totalOne","filtredRow","filter","num","missing","newRow","Array","fill","concat","moveLeft","zeros","combineRow","combinedTotal","parseInt","isNaN","checkForWin","combineColumn","moveDown","filteredColumn","newColumn","moveUp","cellClass","innerText","move","e","code","checkingRow","checkingColumn","empties","removeEventListener","addEventListener"],"mappings":"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","file":"main.1859d45c.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst scoreDisplay = document.querySelector('.game-score');\nconst button = document.querySelector('.start');\nconst cells = document.querySelectorAll('td');\nconst messageWin = document.querySelector('.message-win');\nconst messageLose = document.querySelector('.message-lose');\nconst messageStart = document.querySelector('.message-start');\nlet score = 0;\n\nbutton.addEventListener('click', e => {\n  startGame();\n  score = 0;\n  scoreDisplay.innerHTML = 0;\n  document.addEventListener('keyup', move);\n});\n\nfunction startGame() {\n  cells.forEach(el => {\n    el.innerHTML = '';\n\n    messageWin.classList.add('hidden');\n    messageLose.classList.add('hidden');\n    messageStart.classList.add('hidden');\n  });\n  button.classList.remove('restart-lose');\n  button.className = 'button restart';\n  button.innerHTML = 'Restart';\n  generate();\n  generate();\n  styles();\n}\nstyles();\n\nfunction generate() {\n  const randomNumber = Math.floor(Math.random() * cells.length);\n\n  if (cells[randomNumber].innerHTML === '') {\n    cells[randomNumber].innerHTML = random();\n    checkForLose();\n  } else {\n    generate();\n  }\n}\n\nfunction random() {\n  return Math.random() > 0.9 ? 4 : 2;\n}\n\nfunction moveRight() {\n  for (let i = 0; i < 16; i++) {\n    if (i % 4 === 0) {\n      const totalOne = cells[i].innerHTML;\n      const totalTwo = cells[i + 1].innerHTML;\n      const totalThree = cells[i + 2].innerHTML;\n      const totalFour = cells[i + 3].innerHTML;\n      const row = [+totalOne, +totalTwo, +totalThree, +totalFour];\n\n      const filtredRow = row.filter(num => num);\n      const missing = 4 - filtredRow.length;\n      const zeros = Array(missing).fill('');\n\n      const newRow = zeros.concat(filtredRow);\n\n      cells[i].innerHTML = newRow[0];\n      cells[i + 1].innerHTML = newRow[1];\n      cells[i + 2].innerHTML = newRow[2];\n      cells[i + 3].innerHTML = newRow[3];\n    }\n  }\n}\n\nfunction moveLeft() {\n  for (let i = 0; i < 16; i++) {\n    if (i % 4 === 0) {\n      const totalOne = cells[i].innerHTML;\n      const totalTwo = cells[i + 1].innerHTML;\n      const totalThree = cells[i + 2].innerHTML;\n      const totalFour = cells[i + 3].innerHTML;\n      const row = [+totalOne, +totalTwo, +totalThree, +totalFour];\n\n      const filtredRow = row.filter(num => num);\n      const missing = 4 - filtredRow.length;\n      const zeros = Array(missing).fill('');\n\n      const newRow = filtredRow.concat(zeros);\n\n      cells[i].innerHTML = newRow[0];\n      cells[i + 1].innerHTML = newRow[1];\n      cells[i + 2].innerHTML = newRow[2];\n      cells[i + 3].innerHTML = newRow[3];\n    }\n  }\n}\n\nfunction combineRow() {\n  for (let i = 0; i < 15; i++) {\n    if ((i % 4 !== 3) && cells[i].innerHTML === cells[i + 1].innerHTML) {\n      const combinedTotal\n      = parseInt(cells[i].innerHTML) + parseInt(cells[i + 1].innerHTML);\n\n      cells[i + 1].innerHTML = combinedTotal;\n      cells[i].innerHTML = 0;\n\n      if (!isNaN(combinedTotal)) {\n        score += combinedTotal;\n        scoreDisplay.innerHTML = score;\n      }\n    }\n  }\n  checkForWin();\n}\n\nfunction combineColumn() {\n  for (let i = 0; i < 12; i++) {\n    if (cells[i].innerHTML === cells[i + 4].innerHTML) {\n      const combinedTotal\n      = parseInt(cells[i].innerHTML) + parseInt(cells[i + 4].innerHTML);\n\n      cells[i + 4].innerHTML = combinedTotal;\n      cells[i].innerHTML = 0;\n\n      if (!isNaN(combinedTotal)) {\n        score += combinedTotal;\n        scoreDisplay.innerHTML = score;\n      }\n    }\n  }\n  checkForWin();\n}\n\nfunction moveDown() {\n  for (let i = 0; i < 4; i++) {\n    const totalOne = cells[i].innerHTML;\n    const totalTwo = cells[i + 4].innerHTML;\n    const totalThree = cells[i + 8].innerHTML;\n    const totalFour = cells[i + 12].innerHTML;\n    const column = [+totalOne, +totalTwo, +totalThree, +totalFour];\n\n    const filteredColumn = column.filter(num => num);\n    const missing = 4 - filteredColumn.length;\n    const zeros = Array(missing).fill('');\n    const newColumn = zeros.concat(filteredColumn);\n\n    cells[i].innerHTML = newColumn[0];\n    cells[i + 4].innerHTML = newColumn[1];\n    cells[i + 8].innerHTML = newColumn[2];\n    cells[i + 12].innerHTML = newColumn[3];\n  }\n}\n\nfunction moveUp() {\n  for (let i = 0; i < 4; i++) {\n    const totalOne = cells[i].innerHTML;\n    const totalTwo = cells[i + 4].innerHTML;\n    const totalThree = cells[i + 8].innerHTML;\n    const totalFour = cells[i + 12].innerHTML;\n    const column = [+totalOne, +totalTwo, +totalThree, +totalFour];\n\n    const filteredColumn = column.filter(num => num);\n    const missing = 4 - filteredColumn.length;\n    const zeros = Array(missing).fill('');\n    const newColumn = filteredColumn.concat(zeros);\n\n    cells[i].innerHTML = newColumn[0];\n    cells[i + 4].innerHTML = newColumn[1];\n    cells[i + 8].innerHTML = newColumn[2];\n    cells[i + 12].innerHTML = newColumn[3];\n  }\n}\n\nfunction styles() {\n  cells.forEach(el => {\n    const cellClass = `field-cell--${el.innerHTML}`;\n\n    el.className = '';\n    el.classList.add('field-cell');\n\n    if (el.innerText > 0) {\n      el.classList.add(cellClass);\n    };\n  });\n}\n\nfunction move(e) {\n  if (e.code === 'ArrowRight') {\n    moveRight();\n    combineRow();\n    moveRight();\n    generate();\n    styles();\n  } else if (e.code === 'ArrowLeft') {\n    moveLeft();\n    combineRow();\n    moveLeft();\n    generate();\n    styles();\n  } else if (e.code === 'ArrowDown') {\n    moveDown();\n    combineColumn();\n    moveDown();\n    generate();\n    styles();\n  } else if (e.code === 'ArrowUp') {\n    moveUp();\n    combineColumn();\n    moveUp();\n    generate();\n    styles();\n  }\n}\n\nfunction checkingRow() {\n  for (let i = 0; i < cells.length - 1; i++) {\n    if (cells[i].innerHTML === cells[i + 1].innerHTML) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction checkingColumn() {\n  for (let i = 0; i < 12; i++) {\n    if (cells[i].innerHTML === cells[i + 4].innerHTML) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction checkForLose() {\n  let empties = 0;\n\n  cells.forEach(el => {\n    if (el.innerHTML === '') {\n      empties++;\n    }\n  });\n\n  if (empties === 0 && !checkingRow() && !checkingColumn()) {\n    messageStart.classList.add('hidden');\n    messageLose.classList.remove('hidden');\n    button.classList.remove('restart');\n    button.classList.add('restart-lose');\n    document.removeEventListener('keyup', move);\n  }\n}\n\nfunction checkForWin() {\n  cells.forEach(el => {\n    if (el.innerHTML == 2048) {\n      messageStart.classList.add('hidden');\n      messageWin.classList.remove('hidden');\n      document.removeEventListener('keyup', move);\n    }\n  });\n}\n"]}